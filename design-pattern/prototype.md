## 原型(Prototype)模式

### 定义

用一个已经创建的实例作为原型，通过复制该原型对象来创建一个和原型相同或相似的新对象。

### 优缺点

优点：

- Java 自带的原型模式基于内存二进制流的复制，在性能上比直接 new 一个对象更加优良。
- 使用深克隆方式保存对象的状态，简化了创建对象的过程

缺点：

- 需要为每个类都配置一个clone方法
- clone方法在类的内部，修改类时需要修改代码，违背了开闭原则
- 实现深克隆时，需要编写较为复杂的代码。当对象之间存在嵌套引用时，为了实现深克隆，需要每一层对象的类都必须支持深克隆，实现过程较麻烦

### 应用场景

- 对象之间相同或相似，只有个别的几个属性不同的时候
- 创建对象成本较大
- 创建一个对象需要繁琐的数据准备或访问权限等，需要提高性能或者提高安全性
- 系统中大量使用该类对象，且各个调用者都需要给它的属性重新赋值

### 实现

原型模式的克隆分为浅克隆和深克隆

- 浅克隆：创建一个新对象，新对象的属性和原来对象完全相同，**对于非基本类型属性，仍指向原有属性所指向的对象的内存地址**。
- 深克隆：创建一个新对象，**属性中引用的其他对象也会被克隆**，不再指向原有对象地址。

### 单例模式在JDK和Spring源码中的应用